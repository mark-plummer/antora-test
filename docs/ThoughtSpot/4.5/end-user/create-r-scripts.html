<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create and share R scripts :: ThoughtSpot Demo Site</title>
    <link rel="canonical" href="https://docs.thoughtspot.com/ThoughtSpot/5.0/end-user/create-r-scripts.html">
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.thoughtspot.com"><img src="_images/company_logo_white.svg" alt="ThoughtSpot logo" height="47.42" width="158"/></a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ThoughtSpot" data-version="4.5">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ThoughtSpot</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">About this release</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release/notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release/downloads.html">Downloads</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Users</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-navigating-thoughtspot.html">Finding your way around</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="accessing.html">ThoughSpot browser access</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-user.html">Your user preferences</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-privileges-end-user.html">Understanding privileges</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="stickers.html">Use stickers to organize</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Use Search</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-starting-a-new-search.html">What are searches and answers?</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Search basics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="start-a-new-search.html">Start a new search</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-choosing-sources.html">Choose a data source</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-the-search-bar.html">Search bar features</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="recent-searches.html">Search suggestions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-attributes-and-measures.html">Search results and column types</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="data-refresh-time.html">Last data refresh time</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="work-with-answers.html">Work with answers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-tables.html">Results that are tables</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Use keywords in search</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-keyword-searches.html">Overview of keyword searches</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="period-searches.html">Time series analysis</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="search-using-growth-over-time.html">Search using growth over time</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="proximity-search.html">Proximity searches "near" and "farther than"</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Work with filters</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-filters.html">Understand filters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="filter-from-column-headers.html">Add a filter to a table</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="filter-from-chart-axes.html">Add a filter to a chart</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="create-bulk-filter.html">Create a bulk filter</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="delete-a-filter.html">Delete a filter</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-filters-for-null.html">Filter on null, blank, or empty values</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other search actions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="change-the-view.html">Change result display options</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="show-underlying-data.html">Show underlying data</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="drill-down.html">See the search behind the result</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="apply-conditional-formatting.html">Apply conditional formatting to a table</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="download-your-search.html">Download your search</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="replay-search.html">Replay search</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Work with charts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-charts.html">Understand charts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Chart types</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-column-charts.html">Column charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-bar-charts.html">Bar charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-line-charts.html">Line charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="pie-charts.html">Pie charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="area-charts.html">Area charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-scatter-charts.html">Scatter charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-bubble-charts.html">Bubble charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-pareto-charts.html">Pareto charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-waterfall-charts.html">Waterfall charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-treemap-charts.html">Treemap charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="line-column-charts.html">Line column charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-funnel-charts.html">Funnel charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-geo-charts.html">Geo charts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-pivoting-a-table.html">Pivot table</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Changing a chart</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="reorder-values-on-the-x-axis.html">Reorder the labels</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="set-the-y-axis-scale.html">Set the y-axis range</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="hide-and-show-values.html">Hide and show values</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="change-chart-colors.html">Change chart colors</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="show-data-labels.html">Additional chart options</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="zoom-into-a-chart.html">Zoom into a chart</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Work with formulas</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="add-formula-to-search.html">Understand formulas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="how-to-add-formula.html">Add a formula to a search</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="edit-formula-in-answer.html">View or edit a formula in search</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Aggregate formulas</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="aggregation-formulas.html">Overivew of aggregate formulas</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-cumulative-formulas.html">Cumulative functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-pinned-measures.html">Grouping functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="about-moving-formulas.html">Moving functions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="filtered-agg-forms.html">Filtered aggregation functions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="conversion-formulas.html">Conversion functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="date-formulas.html">Date functions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="percent-calculations.html">Percent (simple number) calculations</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="conditional-sum.html">Formula operators</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-nested-formulas.html">Nested formulas</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-formula-support-for-chasm-trap-schemas.html">Formulas for chasm traps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Work with worksheets</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-query-on-query.html">Understand worksheets</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="create-aggregated-worksheet.html">Save a search as a worksheet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="do-query-on-query.html">Create a search from a worksheet</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="more-example-scenarios.html">Worksheet example scenarios</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Use pinboards</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-pinboards.html">Basic pinboard usage</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="edit-the-layout-of-a-pinboard.html">Edit a pinboard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pinboard-filters.html">Pinboard filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="schedule-a-pinboard-job.html">Schedule a pinboard job</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about-showing-underlying-data-from-within-a-pinboard.html">Search actions within a pinboard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="copy-a-pinboard.html">Copy a pinboard</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="copy-link-for-a-pinboard.html">Copy a pinboard or visualization link</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reset-a-visualization.html">Reset a pinboard or visualization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="start-a-slideshow.html">Start a slideshow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Work with data</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="data-intro-end-user.html">Understand data sources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="generate-flat-file.html">Create and load CSV files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="append-data-from-a-web-browser.html">Append data through the UI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="view-your-data-profile.html">View a data profile</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="locale.html">Date and currency format settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">SpotIQ</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="whatisspotiq.html">What is SpotIQ</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="overview.html">101:Load and analyze data</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="work-with-insights.html">101:Review and save insights</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="spotiq-customize.html">101:Do more with SpotIQ</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="special-topics.html">Best SpotIQ Practices</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="customization.html">Custom SpotIQ analysis</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="adv-customize-withr.html">Advanced R Customizations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Share your work</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="sharing-for-end-users.html">About sharing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="share-pinboards.html">Share pinboards</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="share-answers.html">Share answers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="share-user-imported-data.html">Share uploaded data</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="unshare.html">Revoke access (unshare)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Slack and ThoughtSpot</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="intro.html">Slack and Spot</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="use-spot.html">How to use Spot</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="what-you-can-find-in-the-help-center.html">More help and support</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ThoughtSpot</span>
    <span class="version">4.5</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ThoughtSpot</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../5.0/index.html">5.0</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">4.5</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">ThoughtSpot</a></li>
    <li><a href="create-r-scripts.html">Create and share R scripts</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.5</button>
  <div class="version-menu">
    <a class="version" href="../../5.0/end-user/create-r-scripts.html">5.0</a>
    <a class="version is-current" href="create-r-scripts.html">4.5</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/mark-plummer/antora-test/edit/master/site/modules/end-user/pages/create-r-scripts.adoc">Edit this Page</a></div>
  </div>
<article class="doc"><a name="section-top"></a>
<h1 class="page">Create and share R scripts</h1>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>{% include note.html content="Custom R is disabled by default.
To turn on custom R scripting, contact your site administrator." %}</p>
</div>
<div class="paragraph">
<p>Each ThoughtSpot cluster is capable of running an R analysis on your data.
To perform your own R analysis, start with a simple search and click the R icon on the right.</p>
</div>
<div class="paragraph">
<p>Use the <strong>Custom R Script</strong> dialog and settings to enter your script, set which columns to include for analysis, and indicate what output data to expect from your script (PNG or CSV).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-script-dialog.png" alt="r script dialog">
</div>
</div>
<div class="paragraph">
<p>ThoughtSpot also supports the sharing of scripts among users to enable you to share your powerful R analyses across the system, and allow others to run your scripts on different search results.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_it_works"><a class="anchor" href="#_how_it_works"></a>How it works</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An R script in ThoughtSpot is based off of your original search (both the data and the schema), using the columns you select for the analysis.
You can select all columns used in the original search or a subset of those columns, depending on the script.</p>
</div>
<div class="paragraph">
<p>ThoughtSpot auto generates objects with variable names by which you can refer to data elements in your script.</p>
</div>
<div class="paragraph">
<p>You can refer to the data in the selected columns by using vectors that ThoughtSpot generates for these before the script is run.
The first column you select has the variable name <code>.param0</code>, the second column you select has the variable name <code>.param1</code>, and so on.
This naming scheme continues if there are more columns.
(You can click the question mark icon <span class="image"><img src="_images/r-icon-question-mark.png" alt="question icon"></span> next to "<strong>Select columns for R analysis</strong>" to get a visual mapping of how the columns are bound to variables in R.)</p>
</div>
<div class="paragraph">
<p>ThoughtSpot also provides an automatically-generated <em>data frame</em> object, <code>df</code>, that contains all selected column vectors.
The data frame is R&#8217;s representation of a table (a 2D data structure containing rows and columns).</p>
</div>
<div class="paragraph">
<p>When the script executes, it passes the information to the server to run the analysis, and displays the answer as a visualization, in either PNG or CSV (table) format.</p>
</div>
<div class="paragraph">
<p>As we demonstrate in the following examples, you can chain R analyses together by running another R script on the answer to a previous script.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_write_a_custom_script"><a class="anchor" href="#_write_a_custom_script"></a>Write a custom script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To add a custom R script, start by running a search, then click the <strong>R</strong> icon <span class="image"><img src="_images/r-icon-inline.png" alt="R icon"></span> on the toolbar.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-icon.png" alt="r icon">
</div>
</div>
<div class="paragraph">
<p>Add your script into the <strong>Custom R Script</strong> dialog, and set the <a href="#column-bindings">column bindings</a> and <a href="#output-file-type">output type</a> appropriately, as shown in the following examples.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-png-basic.png" alt="r png basic">
</div>
</div>
<div class="paragraph">
<p>For an R script to produce a meaningful output in ThoughtSpot, the script should generate a CSV or PNG file.
Output should be written to the token <code><mark>output_file</mark></code>.
CSV output is rendered back as a simple table in ThoughtSpot, PNG output is rendered back as a static PNG.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_r_script_to_generate_csv_data"><a class="anchor" href="#_basic_r_script_to_generate_csv_data"></a>Basic R script to generate CSV data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an example of a basic R script that generates CSV data.
(The <code>df</code> variable name must be lower case, as shown.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>write.csv(df,  #output_file#)</pre>
</div>
</div>
<div class="paragraph">
<p>The generated data is displayed back as a table when you run the analysis:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-csv-basic.png" alt="r csv basic">
</div>
</div>
<div class="paragraph">
<p>This basic script returns the exact same table results as if you did the query directly in ThoughtSpot and selected the table view, barring some additional formatting you get for free on the search.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-basic-table-search-result.png" alt="r basic table search result">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_r_script_to_generate_a_png_graphic"><a class="anchor" href="#_basic_r_script_to_generate_a_png_graphic"></a>Basic R script to generate a PNG graphic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is an example of a basic R script that generates PNG data as output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>png(#output_file#)
plot(.param0, .param1)</pre>
</div>
</div>
<div class="paragraph">
<p>The generated data is displayed back as a static PNG when you run the analysis:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-png-basic.png" alt="r png basic">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_column_bindings_and_output_file_type"><a class="anchor" href="#_column_bindings_and_output_file_type"></a>Column bindings and output file type</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Under <strong>Select column(s) for R analysis</strong>, you specify the data you want to send to R and how to send it.
If you do not make any choices here, all columns in the search are selected in the order they appear in the search bar.</p>
<div class="paragraph">
<p>In the examples above, <code>Year (Date)</code> is <code>.param0</code>, and <code>Sales</code> is <code>.param1</code>.
To verify this, click the question mark icon next to <strong>Select columns for R analysis</strong> to see the &#8220;column bindings&#8221;.
Reordering the columns changes the column bindings/params.</p>
</div>
</li>
<li>
<p>Under <strong>Output File Type</strong> Select PNG or CSV, depending on the output details and in your script.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options_on_scripts"><a class="anchor" href="#_options_on_scripts"></a>Options on scripts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can click these icons in the R script dialog to get more options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The R script information icon <span class="image"><img src="_images/r-icon-i.png" alt="more options menu icon"></span> provides a basic reference guide for creating an R analysis in ThoughtSpot.</p>
</li>
<li>
<p>The ellipses icon <span class="image"><img src="_images/icon-ellipses.png" alt="more options menu icon"></span> provides a menu with options to save or load a previously saved R script, as well as share your R script with other users in the system.</p>
</li>
<li>
<p>The arrow at the top right of the script dialog <span class="image"><img src="_images/r-icon-popout-arrow.png" alt="popout arrow"></span> opens a popout editor that gives you a larger space in which to view and edit your R script.</p>
</li>
<li>
<p>The question mark icon <span class="image"><img src="_images/r-icon-question-mark.png" alt="question icon"></span> next to "<strong>Select column(s) for R analysis</strong>" provides a visual mapping of how the columns are bound to variables in R.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_k_means_clustering_example_scripts"><a class="anchor" href="#_k_means_clustering_example_scripts"></a>K-Means clustering example scripts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This script loads the <code>ggplot2</code> visualization package, labels the columns inside of the ThoughtSpot generated data frame object (<code>df</code>), and runs a K-Means clustering algorithm.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>library(ggplot2)

kmeansOutput &lt;- kmeans(df[1:2], 3, nstart = 20)
kmeansOutput$cluster &lt;- as.factor(kmeansOutput$cluster)
png(file=#output_file#, width=400, height=350, res=72)
print(ggplot(df, aes(.param0, .param1, color = kmeansOutput$cluster)) + geom_point())</pre>
</div>
</div>
<div class="paragraph">
<p>When you run this script on the results of the original <code>sales date</code> search, you get the following visualization as a PNG.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-custom-script-png.png" alt="r custom script png">
</div>
</div>
<div class="paragraph">
<p>You can run another R script directly on this result to get CSV results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kmeansOutput &lt;- kmeans(df[1:2], 3, nstart = 20);
df$Cluster &lt;- as.factor(kmeansOutput$cluster);
write.csv(df, file=#output_file#, row.names=FALSE);</pre>
</div>
</div>
<div class="paragraph">
<p>The script for CSV output generates a table:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-custom-script-csv.png" alt="r custom script csv">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_save_and_share_your_script"><a class="anchor" href="#_save_and_share_your_script"></a>Save and share your script</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To save a script, choose <strong>Save as</strong> from the options menu <span class="image"><img src="_images/icon-ellipses.png" alt="more options menu icon"></span> of the script.
After you name and save it, your script will show in the <strong>Load</strong> scripts dialog.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-save-script.png" alt="r save script">
</div>
</div>
<div class="paragraph">
<p>To share a script, choose <strong>Share</strong> from the options menu <span class="image"><img src="_images/icon-ellipses.png" alt="more options menu icon"></span>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-share-script.png" alt="r share script">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_more_script_examples"><a class="anchor" href="#_more_script_examples"></a>More script examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For some more example scripts, check out the blog post on <a href="https://www.thoughtspot.com/codex/using-r-analysis-thoughtspot-time-series-forecasting">Using R Analysis in ThoughtSpot for Time Series Forecasting</a>, or load one of the ThoughtSpot provided scripts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Binomial Logistic Regression</p>
</li>
<li>
<p>K-Means Clustering Plot</p>
</li>
<li>
<p>K-Means Clustering Table</p>
</li>
<li>
<p>Time Series Outlier Detection</p>
</li>
<li>
<p>Time Series Forecast</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/r-script-load-prebuilt.png" alt="r script load prebuilt">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_related_information"><a class="anchor" href="#_related_information"></a>Related information</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.thoughtspot.com/codex/using-r-analysis-thoughtspot-time-series-forecasting">Using R Analysis in ThoughtSpot for Time Series Forecasting</a> (blog post by Antony Chen of ThoughtSpot)</p>
</li>
<li>
<p><a href="https://www.r-project.org/">R Project for Statistical Computing</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
  <h3 class="toc-title">On this page</h3>
  <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<!-- original scripts-->
<!--<script src="../../../_/js/site.js"></script> -->
<!-- <script async src="../../../_/js/vendor/highlight.js"></script> -->
<!-- new scripts to add right-hand page TOC -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
<script>
  tocbot.init( {
                 tocSelector: '#article-toc',
                 contentSelector: 'article',
                 headingSelector: 'h2, h3, h4',
                 collapseDepth: 3,
                 positionFixedSelector: '#article-toc',
                 scrollSmooth: false
               } );
  var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
  if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
    document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
  }
</script>
  </body>
</html>
